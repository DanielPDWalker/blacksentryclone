{% extends 'base.html' %}

{% block content %}
    {% if user.is_authenticated %}
        {% if user.player.hp_current < 1 %}
            <h1>Game.html</h1>
            <a href="{% url 'leaderboard' %}">Leaderboard</a>
            <br>
            <br>
            <p>You are logged in as {{ user.username }}</p>
            <br>
            <p>{{ player.hp_current }} / {{ player.hp_max }} HP</p>
            <p>{{ player.power_crystals }} Power Crystals</p>
            <p>{{ player.gold }} Gold</p>
            <br>
            <p>You have died to death. The cause was a rather vicious {{ current_enemy }} who managed to hit you for {{ dmg_delt_enemy }}.</p>
            <p>Speaking as a god, I think I can fix this... For a small fee...</p>
            <form method="POST", class="form-group">
                {% csrf_token %}
                <br>
                <button onclick="this.form.submit(); this.disabled=true; location.href='{% url 'game' %}';" id="ressurect_button" type="submit" class="btn btn-dark">Ressurect</button>
            </form>
        {% else %}
            <h1>Game.html</h1>
            <a href="{% url 'leaderboard' %}">Leaderboard</a>
            <br>
            <br>
            <p>You are logged in as {{ user.username }}</p>
            <br>
            <p>{{ player.hp_current }} / {{ player.hp_max }} HP</p>
            <p>{{ player.power_crystals }} Power Crystals</p>
            <p>{{ player.gold }} Gold</p>
            <br>
            <h3>Are you lost mortal?</h3>
            <a href="{% url 'game' %}">Back to game</a>
        {% endif %}
            
    {% else %}
    <!-- USER NOT LOGGED IN -->
        <h1>Game.html</h1>
        <div class="container">
            <p>Please log in or register to play</p>
            <button onclick="location.href='{% url 'login' %}'"; id="login_button" type="button" class="btn btn-dark">Login</button>
            <button onclick="location.href='{% url 'register' %}';"; id="register_button" type="button" class="btn btn-dark">Register</button>
        </div>
    {% endif %}
{% endblock %}